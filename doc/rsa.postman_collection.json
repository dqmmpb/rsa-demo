{
	"info": {
		"name": "rsa",
		"_postman_id": "5ff57ea6-a5fb-853f-e82d-6920f3adc4ca",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "pre-request脚本测试 md5 lodash",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "d00b0482-e98e-4e17-8b27-cc25ed198f5f",
						"type": "text/javascript",
						"exec": [
							"",
							"var md5Password = CryptoJS.MD5(\"123\").toString().toUpperCase();",
							"console.log(md5Password);",
							"",
							"var te = [1, 2, 3, 4];",
							"var _ = require('lodash');",
							"var de = _.reverse(te);",
							"console.log(de);",
							"",
							"window = {};",
							"navigator = {};"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "17b2a1f6-b0ef-40b9-a972-5ecb01285f2b",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "message",
							"value": "{{encryptMessage}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "cPub",
							"value": "{{cPub}}",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "http://localhost:8080/rsa/rest/api/v1/send",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"rsa",
						"rest",
						"api",
						"v1",
						"send"
					]
				},
				"description": null
			},
			"response": []
		},
		{
			"name": "rsa pre-request脚本测试 jsrsasign",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "eb852b03-5b76-4cc4-87af-87195b2e87bd",
						"type": "text/javascript",
						"exec": [
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if( typeof window === \"undefined\" )",
							"  window = {};",
							"if( typeof navigator === \"undefined\" )",
							"  navigator = {};",
							"",
							"pm.sendRequest({",
							"    url: 'http://localhost:8080/rsa/rest/api/v1/init',",
							"    method: \"POST\",",
							"}, function (err, res) {",
							"    console.log(res.json());",
							"    console.log('-------------------- 华丽的分割线 请求前 -----------------------');",
							"    pm.sendRequest({",
							"        url: 'https://cdn.bootcss.com/jsrsasign/8.0.5/jsrsasign-all-min.js',",
							"        method: \"GET\",",
							"    }, function (err, res) {",
							"",
							"        var jsrsasign = res.stream.toString();",
							"        // 执行jsrsasign，加载第三方库",
							"        eval(jsrsasign);",
							"        ",
							"        // RSAKey的扩展函数",
							"        RSAKey.prototype.getPEM = function(key, pemHeader) {",
							"          return hextopem(b64nltohex(key), pemHeader);",
							"        };",
							"",
							"        RSAKey.prototype.encryptB64 = function (text) {",
							"          return hextob64(this.encrypt(text));",
							"        };",
							"        ",
							"        RSAKey.prototype.decryptB64 = function (text) {",
							"          return this.decrypt(b64tohex(text));",
							"        };",
							"        ",
							"        RSAKey.prototype.getPrivateBaseKey = function () {",
							"          var keyPem = KEYUTIL.getPEM(this, \"PKCS8PRV\");",
							"          return pemtohex(keyPem);",
							"        };",
							"        ",
							"        RSAKey.prototype.getPrivateBaseKeyB64 = function () {",
							"          return hextob64(this.getPrivateBaseKey());",
							"        };",
							"        ",
							"        RSAKey.prototype.getPublicBaseKey = function () {",
							"          var keyPem = KEYUTIL.getPEM(this, \"PKCS8PUB\");",
							"          return pemtohex(keyPem);",
							"        };",
							"        ",
							"        RSAKey.prototype.getPublicBaseKeyB64 = function () {",
							"          return hextob64(this.getPublicBaseKey());",
							"        };",
							"        ",
							"        RSAKey.prototype.readPKCS8PrvKeyFromB64 = function (prvKeyB64) {",
							"          var prvKeyPem = this.getPEM(prvKeyB64, \"PRIVATE KEY\");",
							"          this.readPKCS8PrvKeyHex(pemtohex(prvKeyPem));",
							"        };",
							"        ",
							"        RSAKey.prototype.readPKCS8PubKeyFromB64 = function (pubKeyB64) {",
							"          var pubKeyPem = this.getPEM(pubKeyB64, \"PUBLIC KEY\");",
							"          this.readPKCS8PubKeyHex(pemtohex(pubKeyPem));",
							"        };",
							"        ",
							"        RSAKey.readPKCS9KeypairFromB64 = function(prvKeyB64, pubKeyB64) {",
							"          var prvKey = new RSAKey();",
							"          prvKey.readPKCS8PrvKeyFromB64(prvKeyB64);",
							"          var pubKey = new RSAKey();",
							"          pubKey.readPKCS8PubKeyFromB64(pubKeyB64);",
							"        ",
							"          var result = {};",
							"          result.prvKeyObj = prvKey;",
							"          result.pubKeyObj = pubKey;",
							"          return result;",
							"        };",
							"        ",
							"        /**",
							"        * 加密",
							"        * @param text 待加密的字符串",
							"        * @param key 加密的key",
							"        * @param isPub 是否使用publicKey加密，默认false",
							"        * @returns {*}",
							"        */",
							"        function encrypt(text, key, isPub) {",
							"            // Encrypt with key...",
							"            var rsa = new RSAKey();",
							"            if(isPub) {",
							"              rsa.readPKCS8PubKeyFromB64(key);",
							"            } else {",
							"              rsa.readPKCS8PrvKeyFromB64(key);",
							"            }",
							"            var encrypted = rsa.encryptB64(text);",
							"            ",
							"            return encrypted;",
							"        }",
							"        ",
							"        /**",
							"        * 解密",
							"        * @param text 待解密的字符串",
							"        * @param key 解密的key",
							"        * @param isPub 是否使用publicKey解密，默认false",
							"        * @returns {*}",
							"        */",
							"        function decrypt(text, key, isPub) {",
							"            // Decrypt with key...",
							"            var rsa = new RSAKey();",
							"            if(isPub) {",
							"              rsa.readPKCS8PubKeyFromB64(key);",
							"            } else {",
							"              rsa.readPKCS8PrvKeyFromB64(key);",
							"            }",
							"            var decrypted = rsa.decryptB64(text);",
							"            ",
							"            return decrypted;",
							"        }",
							"",
							"        var sPub = new RSAKey();",
							"        sPub.readPKCS8PubKeyFromB64(SERVER_PUBLICKEY);",
							"        ",
							"        var message = 'Java中文';",
							"        // 加密前消息",
							"        console.log('加密前：', message);",
							"        // 加密",
							"        var encryptMessage = encrypt(message, sPub.getPublicBaseKeyB64(), true);",
							"        // 加密后消息",
							"        console.log('密文：', encryptMessage);",
							"        ",
							"        postman.setEnvironmentVariable('encryptMessage', encryptMessage);",
							"        postman.setEnvironmentVariable('cPub', CLIENT_PUBLICKEY);",
							"        ",
							"    });  ",
							"    ",
							"});",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "030ac54c-3d47-470c-b8f7-354960b01eec",
						"type": "text/javascript",
						"exec": [
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if( typeof window === \"undefined\" )",
							"  window = {};",
							"if( typeof navigator === \"undefined\" )",
							"  navigator = {};",
							"",
							"pm.test(\"response is ok\", function () {",
							"    console.log('-------------------- 华丽的分割线 请求后 -----------------------');",
							"    pm.response.to.have.status(200);",
							"    pm.sendRequest({",
							"        url: 'https://cdn.bootcss.com/jsrsasign/8.0.5/jsrsasign-all-min.js',",
							"        method: \"GET\",",
							"    }, function (err, res) {",
							"    ",
							"        var jsrsasign = res.stream.toString();",
							"        // 执行jsrsasign，加载第三方库",
							"        eval(jsrsasign);",
							"        ",
							"        // RSAKey的扩展函数",
							"        RSAKey.prototype.getPEM = function(key, pemHeader) {",
							"          return hextopem(b64nltohex(key), pemHeader);",
							"        };",
							"        ",
							"        RSAKey.prototype.encryptB64 = function (text) {",
							"          return hextob64(this.encrypt(text));",
							"        };",
							"        ",
							"        RSAKey.prototype.decryptB64 = function (text) {",
							"          return this.decrypt(b64tohex(text));",
							"        };",
							"        ",
							"        RSAKey.prototype.getPrivateBaseKey = function () {",
							"          var keyPem = KEYUTIL.getPEM(this, \"PKCS8PRV\");",
							"          return pemtohex(keyPem);",
							"        };",
							"        ",
							"        RSAKey.prototype.getPrivateBaseKeyB64 = function () {",
							"          return hextob64(this.getPrivateBaseKey());",
							"        };",
							"        ",
							"        RSAKey.prototype.getPublicBaseKey = function () {",
							"          var keyPem = KEYUTIL.getPEM(this, \"PKCS8PUB\");",
							"          return pemtohex(keyPem);",
							"        };",
							"        ",
							"        RSAKey.prototype.getPublicBaseKeyB64 = function () {",
							"          return hextob64(this.getPublicBaseKey());",
							"        };",
							"        ",
							"        RSAKey.prototype.readPKCS8PrvKeyFromB64 = function (prvKeyB64) {",
							"          var prvKeyPem = this.getPEM(prvKeyB64, \"PRIVATE KEY\");",
							"          this.readPKCS8PrvKeyHex(pemtohex(prvKeyPem));",
							"        };",
							"        ",
							"        RSAKey.prototype.readPKCS8PubKeyFromB64 = function (pubKeyB64) {",
							"          var pubKeyPem = this.getPEM(pubKeyB64, \"PUBLIC KEY\");",
							"          this.readPKCS8PubKeyHex(pemtohex(pubKeyPem));",
							"        };",
							"        ",
							"        RSAKey.readPKCS9KeypairFromB64 = function(prvKeyB64, pubKeyB64) {",
							"          var prvKey = new RSAKey();",
							"          prvKey.readPKCS8PrvKeyFromB64(prvKeyB64);",
							"          var pubKey = new RSAKey();",
							"          pubKey.readPKCS8PubKeyFromB64(pubKeyB64);",
							"        ",
							"          var result = {};",
							"          result.prvKeyObj = prvKey;",
							"          result.pubKeyObj = pubKey;",
							"          return result;",
							"        };",
							"        ",
							"        /**",
							"        * 加密",
							"        * @param text 待加密的字符串",
							"        * @param key 加密的key",
							"        * @param isPub 是否使用publicKey加密，默认false",
							"        * @returns {*}",
							"        */",
							"        function encrypt(text, key, isPub) {",
							"            // Encrypt with key...",
							"            var rsa = new RSAKey();",
							"            if(isPub) {",
							"              rsa.readPKCS8PubKeyFromB64(key);",
							"            } else {",
							"              rsa.readPKCS8PrvKeyFromB64(key);",
							"            }",
							"            var encrypted = rsa.encryptB64(text);",
							"            ",
							"            return encrypted;",
							"        }",
							"        ",
							"        /**",
							"        * 解密",
							"        * @param text 待解密的字符串",
							"        * @param key 解密的key",
							"        * @param isPub 是否使用publicKey解密，默认false",
							"        * @returns {*}",
							"        */",
							"        function decrypt(text, key, isPub) {",
							"            // Decrypt with key...",
							"            var rsa = new RSAKey();",
							"            if(isPub) {",
							"              rsa.readPKCS8PubKeyFromB64(key);",
							"            } else {",
							"              rsa.readPKCS8PrvKeyFromB64(key);",
							"            }",
							"            var decrypted = rsa.decryptB64(text);",
							"            ",
							"            return decrypted;",
							"        }",
							"       ",
							"        var cPrv = new RSAKey();",
							"        cPrv.readPKCS8PrvKeyFromB64(CLIENT_PRIVATEKEY);",
							"        ",
							"        var message = pm.response.json().result.message;",
							"        // 解密前消息",
							"        console.log('密文：', message);",
							"        // 解密",
							"        var decryptMessage = decrypt(message, cPrv.getPrivateBaseKeyB64());",
							"        // 解密后消息",
							"        console.log('解密后：', decryptMessage);",
							"        ",
							"        var expected = '服务端处理成功，客户端发送过来的内容为：Java中文';",
							"        ",
							"        pm.expect(decryptMessage).to.equal(expected);",
							"        ",
							"    });  ",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "message",
							"value": "{{encryptMessage}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "cPub",
							"value": "{{cPub}}",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "http://localhost:8080/rsa/rest/api/v1/send",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"rsa",
						"rest",
						"api",
						"v1",
						"send"
					]
				},
				"description": null
			},
			"response": []
		},
		{
			"name": "rsa pre-request脚本测试 jsencrypt",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "3de9427a-23a8-48c9-b94d-9c03656ee89b",
						"type": "text/javascript",
						"exec": [
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if( typeof window === \"undefined\" )",
							"  window = {};",
							"if( typeof navigator === \"undefined\" )",
							"  navigator = {};",
							"",
							"pm.sendRequest({",
							"    url: 'http://localhost:8080/rsa/rest/api/v1/init',",
							"    method: \"POST\",",
							"}, function (err, res) {",
							"    console.log(res.json());",
							"    console.log('-------------------- 华丽的分割线 请求前 -----------------------');",
							"    pm.sendRequest({",
							"        // url: 'https://cdn.bootcss.com/jsencrypt/3.0.0-beta.1/jsencrypt.js',",
							"        url: 'http://localhost:8080/rsa/js/lib/jsencrypt/3.0.0-beta.1/jsencrypt.js',",
							"        method: \"GET\",",
							"    }, function (err, res) {",
							"",
							"        var jsencrypt = res.stream.toString();",
							"        // 执行jsencrypt，加载第三方库",
							"        eval(jsencrypt);",
							"        ",
							"        /**",
							"        * 加密",
							"        * @param text 待加密的字符串",
							"        * @param key 加密的key",
							"        * @param isPub 是否使用publicKey加密，默认false",
							"        * @returns {*}",
							"        */",
							"        function encrypt(text, key, isPub) {",
							"            // Encrypt with key...",
							"            var jsEncrypt = new JSEncrypt();",
							"            if (isPub) {",
							"                jsEncrypt.setPublicKey(key);",
							"            } else {",
							"                jsEncrypt.setPrivateKey(key);",
							"            }",
							"            var encrypted = jsEncrypt.encrypt(text);",
							"            ",
							"            return encrypted;",
							"        }",
							"        ",
							"        /**",
							"        * 解密",
							"        * @param text 待解密的字符串",
							"        * @param key 解密的key",
							"        * @param isPub 是否使用publicKey解密，默认false",
							"        * @returns {*}",
							"        */",
							"        function decrypt(text, key, isPub) {",
							"            // Decrypt with key...",
							"            var jsDecrypt = new JSEncrypt();",
							"            if (isPub) {",
							"                jsDecrypt.setPublicKey(key);",
							"            } else {",
							"                jsDecrypt.setPrivateKey(key);",
							"            }",
							"            var decrypted = jsDecrypt.decrypt(text);",
							"            ",
							"            return decrypted;",
							"        }",
							"",
							"        var sPub = new JSEncrypt();",
							"        sPub.setPublicKey(SERVER_PUBLICKEY);",
							"        ",
							"        var message = 'Java中文';",
							"        // 加密前消息",
							"        console.log('加密前：', message);",
							"        // 加密",
							"        var encryptMessage = encrypt(message, sPub.getPublicKeyB64(), true);",
							"        // 加密后消息",
							"        console.log('密文：', encryptMessage);",
							"        ",
							"        postman.setEnvironmentVariable('encryptMessage', encryptMessage);",
							"        postman.setEnvironmentVariable('cPub', CLIENT_PUBLICKEY);",
							"        ",
							"    });  ",
							"    ",
							"});",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "023572a8-c72f-4147-ab48-e77110d56472",
						"type": "text/javascript",
						"exec": [
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if( typeof window === \"undefined\" )",
							"  window = {};",
							"if( typeof navigator === \"undefined\" )",
							"  navigator = {};",
							"",
							"pm.test(\"response is ok\", function () {",
							"    console.log('-------------------- 华丽的分割线 请求后 -----------------------');",
							"    pm.response.to.have.status(200);",
							"    pm.sendRequest({",
							"        // url: 'https://cdn.bootcss.com/jsencrypt/3.0.0-beta.1/jsencrypt.js',",
							"        url: 'http://localhost:8080/rsa/js/lib/jsencrypt/3.0.0-beta.1/jsencrypt.js',",
							"        method: \"GET\",",
							"    }, function (err, res) {",
							"",
							"        var jsencrypt = res.stream.toString();",
							"        // 执行jsencrypt，加载第三方库",
							"        eval(jsencrypt);",
							"        ",
							"        console.log('request: ', window);",
							"        ",
							"        /**",
							"        * 加密",
							"        * @param text 待加密的字符串",
							"        * @param key 加密的key",
							"        * @param isPub 是否使用publicKey加密，默认false",
							"        * @returns {*}",
							"        */",
							"        function encrypt(text, key, isPub) {",
							"            // Encrypt with key...",
							"            var jsEncrypt = new JSEncrypt();",
							"            if (isPub) {",
							"                jsEncrypt.setPublicKey(key);",
							"            } else {",
							"                jsEncrypt.setPrivateKey(key);",
							"            }",
							"            var encrypted = jsEncrypt.encrypt(text);",
							"            ",
							"            return encrypted;",
							"        }",
							"        ",
							"        /**",
							"        * 解密",
							"        * @param text 待解密的字符串",
							"        * @param key 解密的key",
							"        * @param isPub 是否使用publicKey解密，默认false",
							"        * @returns {*}",
							"        */",
							"        function decrypt(text, key, isPub) {",
							"            // Decrypt with key...",
							"            var jsDecrypt = new JSEncrypt();",
							"            if (isPub) {",
							"                jsDecrypt.setPublicKey(key);",
							"            } else {",
							"                jsDecrypt.setPrivateKey(key);",
							"            }",
							"            var decrypted = jsDecrypt.decrypt(text);",
							"            ",
							"            return decrypted;",
							"        }",
							"",
							"        var cPrv = new JSEncrypt();",
							"        cPrv.setPrivateKey(CLIENT_PRIVATEKEY);",
							"        ",
							"        var message = pm.response.json().result.message;",
							"        // 解密前消息",
							"        console.log('密文：', message);",
							"        // 解密",
							"        var decryptMessage = decrypt(message, cPrv.getPrivateKeyB64());",
							"        // 解密后消息",
							"        console.log('解密后：', decryptMessage);",
							"        ",
							"        var expected = '服务端处理成功，客户端发送过来的内容为：Java中文';",
							"        ",
							"        pm.expect(decryptMessage).to.equal(expected);",
							"        ",
							"    });  ",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "message",
							"value": "{{encryptMessage}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "cPub",
							"value": "{{cPub}}",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "http://localhost:8080/rsa/rest/api/v1/send",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"rsa",
						"rest",
						"api",
						"v1",
						"send"
					]
				},
				"description": null
			},
			"response": []
		},
		{
			"name": "rsa pre-request脚本测试 node-rsa",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "e5cd2264-6350-4eb1-ab78-d5a6f38225f9",
						"type": "text/javascript",
						"exec": [
							"var BASE64 = 'base64';",
							"var UTF8 = 'utf8';",
							"",
							"// 加密方法",
							"function encrypt(text, encryptKey) {",
							"  console.log('  encryptKey: ', encryptKey.isPublic(true));",
							"  var encrypted = encryptKey.isPublic(true) ? encryptKey.encrypt(text, BASE64) : encryptKey.encryptPrivate(text, BASE64);",
							"  return encrypted;",
							"}",
							"",
							"// 解密方法",
							"function decrypt(text, decryptKey) {",
							"  console.log('  decryptKey: ', decryptKey.isPublic(true));",
							"  var decrypted = decryptKey.isPublic(true) ? decryptKey.decryptPublic(text, UTF8) : decryptKey.decrypt(text, UTF8);",
							"  return decrypted;",
							"}",
							"",
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"var _thizpm = this;",
							"",
							"if( typeof window === \"undefined\" )",
							"  window = { hello: 123};",
							"if( typeof navigator === \"undefined\" )",
							"  navigator = {};",
							"",
							"pm.sendRequest({",
							"    url: 'http://localhost:8080/rsa/rest/api/v1/init',",
							"    method: \"POST\",",
							"}, function (err, res) {",
							"    console.log(res.json());",
							"    console.log('-------------------- 华丽的分割线 请求前 -----------------------');",
							"",
							"    pm.sendRequest({",
							"        url: 'http://localhost:8080/rsa/js/lib/node-rsa/node-rsa-bundle.js',",
							"        method: \"GET\",",
							"    }, function (err, res) {",
							"        var nodeRsa = res.stream.toString();",
							"        ",
							"        // 执行nodeRsa，加载第三方库",
							"        eval(nodeRsa);",
							"        ",
							"        var NodeRSA = require('node-rsa');",
							"        ",
							"        var message = 'Java中文';",
							"        // 加密前消息",
							"        console.log('加密前：', message);",
							"        // 加密",
							"        var sPub = new NodeRSA(SERVER_PUBLICKEY, 'pkcs8-public-pem');",
							"        var encryptMessage = encrypt(message, sPub);",
							"        // 加密后消息",
							"        console.log('密文：', encryptMessage);",
							"        ",
							"        // 设置变量",
							"        postman.setEnvironmentVariable('encryptMessage', encryptMessage);",
							"        postman.setEnvironmentVariable('cPub', CLIENT_PUBLICKEY); ",
							"",
							"    });",
							"});",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "2959683f-7cf4-41aa-8608-9ed76a40060c",
						"type": "text/javascript",
						"exec": [
							"var BASE64 = 'base64';",
							"var UTF8 = 'utf8';",
							"",
							"// 加密方法",
							"function encrypt(text, encryptKey) {",
							"  console.log('  encryptKey: ', encryptKey.isPublic(true));",
							"  var encrypted = encryptKey.isPublic(true) ? encryptKey.encrypt(text, BASE64) : encryptKey.encryptPrivate(text, BASE64);",
							"  return encrypted;",
							"}",
							"",
							"// 解密方法",
							"function decrypt(text, decryptKey) {",
							"  console.log('  decryptKey: ', decryptKey.isPublic(true));",
							"  var decrypted = decryptKey.isPublic(true) ? decryptKey.decryptPublic(text, UTF8) : decryptKey.decrypt(text, UTF8);",
							"  return decrypted;",
							"}",
							"",
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if( typeof window === \"undefined\" )",
							"  window = {};",
							"if( typeof navigator === \"undefined\" )",
							"  navigator = {};",
							"",
							"pm.test(\"response is ok\", function () {",
							"    console.log('-------------------- 华丽的分割线 请求后 -----------------------');",
							"    pm.response.to.have.status(200);",
							"   ",
							"     pm.sendRequest({",
							"        url: 'http://localhost:8080/rsa/js/lib/node-rsa/node-rsa-bundle.js',",
							"        method: \"GET\",",
							"    }, function (err, res) {",
							"        var nodeRsa = res.stream.toString();",
							"        // 执行nodeRsa，加载第三方库",
							"        eval(nodeRsa);",
							"        ",
							"        var NodeRSA = require('node-rsa');",
							"        ",
							"        var message = pm.response.json().result.message;",
							"        // 解密前消息",
							"        console.log('密文：', message);",
							"        // 解密",
							"        var cPrv = new NodeRSA(CLIENT_PRIVATEKEY, 'pkcs8-private');",
							"        var decryptMessage = decrypt(message, cPrv);",
							"        // 解密后消息",
							"        console.log('解密后：', decryptMessage);",
							"        ",
							"        var expected = '服务端处理成功，客户端发送过来的内容为：Java中文';",
							"        ",
							"        pm.expect(decryptMessage).to.equal(expected);",
							"    });",
							"   ",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "message",
							"value": "{{encryptMessage}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "cPub",
							"value": "{{cPub}}",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "http://localhost:8080/rsa/rest/api/v1/send",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"rsa",
						"rest",
						"api",
						"v1",
						"send"
					]
				},
				"description": null
			},
			"response": []
		},
		{
			"name": "rsa pre-request脚本测试 node-forge",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "7f32276d-eb86-42a6-bc4f-13ac525abc1c",
						"type": "text/javascript",
						"exec": [
							"var BASE64 = 'base64';",
							"var UTF8 = 'utf8';",
							"",
							"",
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if (typeof self === \"undefined\")",
							"  var self = {};",
							"if (typeof window === \"undefined\")",
							"  window = {};",
							"if (typeof navigator === \"undefined\")",
							"  navigator = {};",
							"",
							"pm.sendRequest({",
							"  url: 'http://localhost:8080/rsa/rest/api/v1/init',",
							"  method: \"POST\",",
							"}, function (err, res) {",
							"  console.log(res.json());",
							"  console.log('-------------------- 华丽的分割线 请求前 -----------------------');",
							"",
							"  pm.sendRequest({",
							"    url: 'http://localhost:8080/rsa/js/lib/node-forge/forge.min.js',",
							"    method: \"GET\",",
							"  }, function (err, res) {",
							"    var nodeForge = res.stream.toString();",
							"",
							"    // 执行nodeForge，加载第三方库",
							"    eval(nodeForge);",
							"",
							"    var forge = self.forge;",
							"",
							"    var pki = forge.pki;",
							"    var util = forge.util;",
							"    var rsa = forge.rsa;",
							"    var pem = forge.pem;",
							"",
							"    /**",
							"     * 将PKCS#1转换为PKCS#8",
							"     * @param prvKeyObj",
							"     * @returns {the|*}",
							"     */",
							"    pki.privateKeyPKCS1ToPKCS8 = function (prvKeyObj) {",
							"      // 生成pkcs#8格式的pem",
							"      const rsaPrivateKey = pki.privateKeyToAsn1(prvKeyObj);",
							"      const privateKeyInfo = pki.wrapRsaPrivateKey(rsaPrivateKey);",
							"      const privateKeyPem = pki.privateKeyInfoToPem(privateKeyInfo);",
							"      return pki.privateKeyFromPem(privateKeyPem);",
							"    };",
							"",
							"    /**",
							"     * 提取pem中的body",
							"     * @param Pem",
							"     * @returns {the|*}",
							"     */",
							"    pki.bodyFromPem = function (Pem) {",
							"      return util.encode64(pem.decode(Pem)[0].body);",
							"    };",
							"",
							"    /**",
							"     * 将body转换为pem格式",
							"     * @param pem",
							"     * @param pemHeader",
							"     * @returns {*}",
							"     */",
							"    pki.bodyToPem = function (body, pemHeader) {",
							"      var pemBody = body;",
							"      return \"-----BEGIN \" + pemHeader + \"-----\\r\\n\" +",
							"        pemBody +",
							"        \"\\r\\n-----END \" + pemHeader + \"-----\\r\\n\";",
							"    };",
							"",
							"    /**",
							"     * 将私钥的body转换为pkcs#8格式的pem",
							"     * @param raw",
							"     * @returns {*}",
							"     */",
							"    pki.privateKeyBodyToPem = function (body) {",
							"      return pki.bodyToPem(body, \"PRIVATE KEY\");",
							"    };",
							"",
							"    /**",
							"     * 将公钥的body转换为pem格式",
							"     * @param raw",
							"     * @returns {*}",
							"     */",
							"    pki.publicKeyBodyToPem = function (body) {",
							"      return pki.bodyToPem(body, \"PUBLIC KEY\");",
							"    };",
							"",
							"",
							"    /**",
							"     * 加密",
							"     * @param text 待加密的字符串",
							"     * @param key 加密的key",
							"     * @param isPub 是否使用publicKey加密，默认false",
							"     * @returns {*}",
							"     */",
							"    function encrypt(text, key, isPub) {",
							"      // Encrypt with key...",
							"      var encryptKeyPem = isPub ? pki.publicKeyBodyToPem(key) : pki.privateKeyBodyToPem(key);",
							"      var encryptKey = isPub ? pki.publicKeyFromPem(encryptKeyPem) : pki.privateKeyPKCS1ToPKCS8(pki.privateKeyFromPem(encryptKeyPem));",
							"      var buffer = util.createBuffer(util.encodeUtf8(text));",
							"      var binaryString = buffer.getBytes();",
							"      if (isPub) {",
							"        return util.encode64(encryptKey.encrypt(binaryString));",
							"      } else {",
							"        return util.encode64(encryptKey.encrypt(binaryString));",
							"      }",
							"    }",
							"",
							"    /**",
							"     * 解密",
							"     * @param text 待解密的字符串",
							"     * @param key 解密的key",
							"     * @param isPub 是否使用publicKey解密，默认false",
							"     * @returns {*}",
							"     */",
							"    function decrypt(text, key, isPub) {",
							"      // Decrypt with key...",
							"      var decryptKeyPem = isPub ? pki.publicKeyBodyToPem(key) : pki.privateKeyBodyToPem(key);",
							"      var decryptKey = isPub ? pki.publicKeyFromPem(decryptKeyPem) : pki.privateKeyPKCS1ToPKCS8(pki.privateKeyFromPem(decryptKeyPem));",
							"      var binaryString = util.decode64(text);",
							"      if (isPub) {",
							"        return util.decodeUtf8(decryptKey.decrypt(binaryString));",
							"      } else {",
							"        return util.decodeUtf8(decryptKey.decrypt(binaryString));",
							"      }",
							"    }",
							"",
							"    var message = 'Java中文';",
							"    // 加密前消息",
							"    console.log('加密前：', message);",
							"    // 加密",
							"    var sPub = SERVER_PUBLICKEY;",
							"    var encryptMessage = encrypt(message, sPub, true);",
							"    // 加密后消息",
							"    console.log('密文：', encryptMessage);",
							"",
							"    // 设置变量",
							"    postman.setEnvironmentVariable('encryptMessage', encryptMessage);",
							"    postman.setEnvironmentVariable('cPub', CLIENT_PUBLICKEY);",
							"",
							"  });",
							"});",
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "003d1087-123b-4ce7-b4c9-cb4d301ace01",
						"type": "text/javascript",
						"exec": [
							"var BASE64 = 'base64';",
							"var UTF8 = 'utf8';",
							"",
							"",
							"var CLIENT_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCPrkLZe1AxVnhckFoF/c5BbuW86/LQE5hSynrGq2Dho9SaGqEu8QpZfhqk+w6OQaM8cdiAbakty7sjRzJ47JlGzoxHlurYKfxvo1T/3N2gXFa4H0ZpZXlG+uetyTMl06ndFl9Ji9GvxVzWW2B/RRB5tsEEkdoET3AG4V5bh1VgrQIDAQAB\";",
							"var CLIENT_PRIVATEKEY = \"MIICdwIBADANBgkqhkiG9w0BAQEFAASCAmEwggJdAgEAAoGBAI+uQtl7UDFWeFyQWgX9zkFu5bzr8tATmFLKesarYOGj1JoaoS7xCll+GqT7Do5Bozxx2IBtqS3LuyNHMnjsmUbOjEeW6tgp/G+jVP/c3aBcVrgfRmlleUb6563JMyXTqd0WX0mL0a/FXNZbYH9FEHm2wQSR2gRPcAbhXluHVWCtAgMBAAECgYBBfyukHk1xIDzf3UHcZ1WFiHsbwuc+KSCP5RNQy0DvuxIoaak+T8zq/MxCltuMx6kU3cTWzqaHZM7bBxKgAyLfamrTcFyh4rUrkMzcBEENFkRng7//Px7vzwcUocygA4KGh6eGkef6/33yhgF4wUofUWgW2qyDNQm24OitLti7oQJBAPjOijg1gl6ytRrwdqPq+S4t7Y3ZHFjiis+7yhgZMZoS2JFeVtaQbbPfXzQ4eMExGEH2/lbOuMrsrEkxRUUNGfUCQQCT1apsFYDZwIcGSQ6DStEj4X+ukw5h/q2VnfI8B2u4EqbBbpzZ5DL7lo4yDDH85xifmLl0P3SrhSDeOSa/9ODZAkEA155OZHXi3GRs1MLNXjK07VM6CnK7wT/aYjpw4j97H/XzHs+t29Zga8BJhjzmUS5Vwlzlf584wAspJ2j+id/XvQJARDWLYj8xqkaYhh/jIFS+1k1O+h9DvZciRCwR/fx2iQGiCxGcMTSHCWnXxeO2lLeTtt9ige5dSF4uYhoAdQTpUQJBANoP3JGufyUusSp7UiRX/kUg1K2rfkrzg5MLNpPuKljs3mI/xGopddBogFNomZCbssGpUM+VFvNwnhZQByx58O4=\";",
							"var SERVER_PUBLICKEY = \"MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCsrxY7zwnU8/u9a5KClEjEHDiGyMXYBJUr+il5Pw9KsVqFuhydjV7EiMBTykQ4XuZdaBWqlA7KMOio9xsL8nuMZOSu3fsmuSvMjt6gX/7kd3TQO2Tbjs8sFokJ3LPYqrhWhHCxFe52USMiKEanKbSZch1uPF1+pQHfV4zo8Mu6FQIDAQAB\";",
							"var SERVER_PRIVATEKEY = \"MIICdgIBADANBgkqhkiG9w0BAQEFAASCAmAwggJcAgEAAoGBAKyvFjvPCdTz+71rkoKUSMQcOIbIxdgElSv6KXk/D0qxWoW6HJ2NXsSIwFPKRDhe5l1oFaqUDsow6Kj3Gwvye4xk5K7d+ya5K8yO3qBf/uR3dNA7ZNuOzywWiQncs9iquFaEcLEV7nZRIyIoRqcptJlyHW48XX6lAd9XjOjwy7oVAgMBAAECgYEAk2mb506kq//j5R3RolsHizI0Jwt5qSCwXyxc/z4PxcmE5yerievG/Kto056VgjGxIgfahxWBUqVR1/uqQRas1A2j5/de8Y+LcpNrEuwF8YgOWmK3EAty0pgHQ1ezYSaxJ2AMBF427UrzMpGrB77UEzGE07GxbbC/sK/u66h0A/kCQQD89Q3OmWV8Gxie8XkWHeiUhseo3kZ9AYy7tRpsEkTkkWZAK2znphdHl35yDk0Cqu4uCe3usz6TfRlWu+3WK5k3AkEArsLXtUUt1IVeM0Z0Oxz8AWMb4v1lJiS4BhotZs7fyZ6DnMd+LIdfqQCLl9j3hCzdxEqIqmcuL2uGy1OYdfz9EwJAF+lGM9hWOoQJMMUcsBWFrbyL1Q+l1B04Y2n8JGkZsA16f+ha9A7ENpVAc6Gcb/seZqWzoxO4f5KcuZEsK0mVwwJAIp4qCJhZib2ZeWK9Z3BIYyX0wjQbs0CWy26oC7NzFQc3XvkNf1iZlGqtPDkYXrBchaOWCttBhNcx7ljy3HxuzQJAQxcxqCOUmLJah+Mtjb+aJQ2L6Lg3mBA62WNGxXDzpX2pAcJVZ7bNcsBq41rOpQEtQ8bEyj/Nfxxsxy/F57xuCQ==\";",
							"",
							"",
							"if (typeof self === \"undefined\")",
							"  var self = {};",
							"if (typeof window === \"undefined\")",
							"  window = {};",
							"if (typeof navigator === \"undefined\")",
							"  navigator = {};",
							"",
							"pm.test(\"response is ok\", function () {",
							"  console.log('-------------------- 华丽的分割线 请求后 -----------------------');",
							"  pm.response.to.have.status(200);",
							"",
							"  pm.sendRequest({",
							"    url: 'http://localhost:8080/rsa/js/lib/node-forge/forge.min.js',",
							"    method: \"GET\",",
							"  }, function (err, res) {",
							"    var nodeForge = res.stream.toString();",
							"",
							"    // 执行nodeForge，加载第三方库",
							"    eval(nodeForge);",
							"",
							"    var forge = self.forge;",
							"",
							"    var pki = forge.pki;",
							"    var util = forge.util;",
							"    var rsa = forge.rsa;",
							"    var pem = forge.pem;",
							"    var md = forge.md;",
							"",
							"    /**",
							"     * 将PKCS#1转换为PKCS#8",
							"     * @param prvKeyObj",
							"     * @returns {the|*}",
							"     */",
							"    pki.privateKeyPKCS1ToPKCS8 = function (prvKeyObj) {",
							"      // 生成pkcs#8格式的pem",
							"      const rsaPrivateKey = pki.privateKeyToAsn1(prvKeyObj);",
							"      const privateKeyInfo = pki.wrapRsaPrivateKey(rsaPrivateKey);",
							"      const privateKeyPem = pki.privateKeyInfoToPem(privateKeyInfo);",
							"      return pki.privateKeyFromPem(privateKeyPem);",
							"    };",
							"",
							"    /**",
							"     * 提取pem中的body",
							"     * @param Pem",
							"     * @returns {the|*}",
							"     */",
							"    pki.bodyFromPem = function (Pem) {",
							"      return util.encode64(pem.decode(Pem)[0].body);",
							"    };",
							"",
							"    /**",
							"     * 将body转换为pem格式",
							"     * @param pem",
							"     * @param pemHeader",
							"     * @returns {*}",
							"     */",
							"    pki.bodyToPem = function (body, pemHeader) {",
							"      var pemBody = body;",
							"      return \"-----BEGIN \" + pemHeader + \"-----\\r\\n\" +",
							"        pemBody +",
							"        \"\\r\\n-----END \" + pemHeader + \"-----\\r\\n\";",
							"    };",
							"",
							"    /**",
							"     * 将私钥的body转换为pkcs#8格式的pem",
							"     * @param raw",
							"     * @returns {*}",
							"     */",
							"    pki.privateKeyBodyToPem = function (body) {",
							"      return pki.bodyToPem(body, \"PRIVATE KEY\");",
							"    };",
							"",
							"    /**",
							"     * 将公钥的body转换为pem格式",
							"     * @param raw",
							"     * @returns {*}",
							"     */",
							"    pki.publicKeyBodyToPem = function (body) {",
							"      return pki.bodyToPem(body, \"PUBLIC KEY\");",
							"    };",
							"",
							"    /**",
							"     * 加密",
							"     * @param text 待加密的字符串",
							"     * @param key 加密的key",
							"     * @param isPub 是否使用publicKey加密，默认false",
							"     * @returns {*}",
							"     */",
							"    function encrypt(text, key, isPub) {",
							"      // Encrypt with key...",
							"      var encryptKeyPem = isPub ? pki.publicKeyBodyToPem(key) : pki.privateKeyBodyToPem(key);",
							"      var encryptKey = isPub ? pki.publicKeyFromPem(encryptKeyPem) : pki.privateKeyPKCS1ToPKCS8(pki.privateKeyFromPem(encryptKeyPem));",
							"      var buffer = util.createBuffer(util.encodeUtf8(text));",
							"      var binaryString = buffer.getBytes();",
							"      if (isPub) {",
							"        return util.encode64(encryptKey.encrypt(binaryString));",
							"      } else {",
							"        return util.encode64(encryptKey.encrypt(binaryString));",
							"      }",
							"    }",
							"",
							"    /**",
							"     * 解密",
							"     * @param text 待解密的字符串",
							"     * @param key 解密的key",
							"     * @param isPub 是否使用publicKey解密，默认false",
							"     * @returns {*}",
							"     */",
							"    function decrypt(text, key, isPub) {",
							"      // Decrypt with key...",
							"      var decryptKeyPem = isPub ? pki.publicKeyBodyToPem(key) : pki.privateKeyBodyToPem(key);",
							"      var decryptKey = isPub ? pki.publicKeyFromPem(decryptKeyPem) : pki.privateKeyPKCS1ToPKCS8(pki.privateKeyFromPem(decryptKeyPem));",
							"      var binaryString = util.decode64(text);",
							"      if (isPub) {",
							"        return util.decodeUtf8(decryptKey.decrypt(binaryString));",
							"      } else {",
							"        return util.decodeUtf8(decryptKey.decrypt(binaryString));",
							"      }",
							"    }",
							"    ",
							"    /**",
							"     * 签名",
							"     * @param md md摘要",
							"     * @param key 加密的key",
							"     * @returns {*}",
							"     */",
							"    function sign(key, md, scheme) {",
							"      // Sign with key...",
							"      var signKeyPem = pki.privateKeyBodyToPem(key);",
							"      var signKey = pki.privateKeyPKCS1ToPKCS8(pki.privateKeyFromPem(signKeyPem));",
							"      var buffer = util.createBuffer(util.encodeUtf8(md));",
							"      var binaryString = buffer.getBytes();",
							"      return util.encode64(signKey.sign(binaryString, scheme));",
							"    }",
							"    ",
							"    /**",
							"     * 验签",
							"     * @param md md摘要",
							"     * @param key 加密的key",
							"     * @returns {*}",
							"     */",
							"    function verify(key, digest, signature, scheme) {",
							"      // Verify with key...",
							"      var verifyKeyPem = pki.publicKeyBodyToPem(key);",
							"      var verifyKey = pki.publicKeyFromPem(verifyKeyPem);",
							"      return verifyKey.verify(digest, signature, scheme);",
							"    }",
							"    ",
							"    var message = pm.response.json().result.message;",
							"    var sign = pm.response.json().result.sign;",
							"    ",
							"    // 验签",
							"    var mdMessage = md.sha1.create();",
							"    mdMessage.update(util.encodeUtf8(message));",
							"    // 摘要",
							"    var digest = mdMessage.digest().getBytes();",
							"    // 公钥",
							"    var sPub = SERVER_PUBLICKEY;",
							"    var isPass = verify(sPub, digest, util.decode64(sign));",
							"    // 验签结果",
							"    console.log('验签：', isPass);",
							"    ",
							"    pm.expect(isPass).to.equal(true);",
							"",
							"    // 解密前消息",
							"    console.log('密文：', message);",
							"    // 解密",
							"    var cPrv = CLIENT_PRIVATEKEY;",
							"    var decryptMessage = decrypt(message, cPrv, false);",
							"    // 解密后消息",
							"    console.log('解密后：', decryptMessage);",
							"",
							"    var expected = '服务端处理成功，客户端发送过来的内容为：Java中文';",
							"",
							"    pm.expect(decryptMessage).to.equal(expected);",
							"",
							"  });",
							"",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "message",
							"value": "{{encryptMessage}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "cPub",
							"value": "{{cPub}}",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "http://localhost:8080/rsa/rest/api/v1/send",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "8080",
					"path": [
						"rsa",
						"rest",
						"api",
						"v1",
						"send"
					]
				},
				"description": "包括验签"
			},
			"response": []
		},
		{
			"name": "rsa pre-request脚本测试json",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "28b093ad-e9c7-42ef-98b6-6e7b0374a8e5",
						"type": "text/javascript",
						"exec": [
							"var params = JSON.parse(request.data);",
							"var raw_username = params['raw_username'];",
							"var raw_password =params['raw_password'];",
							"",
							"var username = raw_username;",
							"var password = CryptoJS.MD5(raw_password);",
							"",
							"postman.setEnvironmentVariable('username', username);",
							"postman.setEnvironmentVariable('password', password);"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "753d86a9-6392-4cdd-ad1c-2d2643ff4404",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"raw_username\": \"13819493700\",\n\t\"raw_password\": \"123456\",\n\t\"username\": \"{{username}}\",\n\t\"password\": \"{{password}}\"\n}"
				},
				"url": {
					"raw": "http://www.baidu.com",
					"protocol": "http",
					"host": [
						"www",
						"baidu",
						"com"
					]
				},
				"description": null
			},
			"response": []
		},
		{
			"name": "rsa pre-request脚本测试form",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "673f0d95-2fb5-43f0-9820-634c98bf86f1",
						"type": "text/javascript",
						"exec": [
							"var params = request.data;",
							"var raw_username = params['raw_username'];",
							"var raw_password =params['raw_password'];",
							"",
							"var username = raw_username;",
							"var password = CryptoJS.MD5(raw_password);",
							"",
							"postman.setEnvironmentVariable('username', username);",
							"postman.setEnvironmentVariable('password', password);"
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "753d86a9-6392-4cdd-ad1c-2d2643ff4404",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/x-www-form-urlencoded"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "raw_username",
							"value": "13819493700",
							"description": "",
							"type": "text"
						},
						{
							"key": "raw_password",
							"value": "123456",
							"description": "",
							"type": "text"
						},
						{
							"key": "username",
							"value": "{{username}}",
							"description": "",
							"type": "text"
						},
						{
							"key": "password",
							"value": "{{password}}",
							"description": "",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "http://www.baidu.com",
					"protocol": "http",
					"host": [
						"www",
						"baidu",
						"com"
					]
				},
				"description": null
			},
			"response": []
		}
	]
}